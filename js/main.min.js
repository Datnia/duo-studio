function preload(){function blink(){var r=Math.floor(2*Math.random())+1;let gif=$("#preloader .animation img"),src=gif.attr("src");setTimeout(()=>{gif.attr("src",src)},1e3*r)}function getSVG(){var loadingSvg=Math.floor(5*Math.random())+1,loadedSvg=Math.floor(5*Math.random())+1;$("#preloader .loading-screen svg use").attr("xlink:href","#"+loadingSvg),$("#preloader .loaded-screen svg use").attr("xlink:href","#"+loadedSvg)}function transition(){var text=$("#preloader .subtitle h1:not(.slide-off):not(:last-of-type)").first(),nextText;$("#preloader .subtitle h1:not(.slide-up):not(.slide-off)").first().addClass("slide-up"),text.addClass("slide-off")}function initTransition(){setInterval(()=>{transition()},900)}$("body").addClass("disable-scroll"),setInterval(()=>{blink()},2e3),getSVG(),setTimeout(()=>{$("#preloader .subtitle").fadeTo("slow",1),setTimeout(()=>{$("#preloader .subtitle h1:first-of-type").addClass("slide-up"),initTransition()},700)},1e3),setTimeout(()=>{var tl=gsap.timeline({onComplete(){$("body").addClass("loaded").removeClass("disable-scroll")}});tl.to("#preloader .loading-screen",{duration:2,bottom:0,ease:"Expo.easeIn"}),tl.to("#preloader",{duration:1.2,height:0,top:-430,ease:"Expo.easeOut"}),tl.set("#preloader",{display:"none"}),tl.from("#landing video",.7,{opacity:0,ease:"Power1.easeOut"}),tl.from("#landing .anim",{yPercent:100,opacity:0,stagger:.3,ease:"Power1.easeOut"},"-=.2"),tl.from("#landing aside",1,{opacity:0,ease:"Power1.easeOut"},"+=.3")},4500)}function hpTransition(){console.log("ran");var tl=gsap.timeline({onComplete(){$("body").addClass("loaded")}});tl.from("#landing video",.5,{opacity:0,ease:"Power1.easeOut"}),tl.from("#landing .anim",{yPercent:100,opacity:0,stagger:.3,ease:"Power1.easeOut"},"-=.2"),tl.from("#landing aside",1,{opacity:0,ease:"Power1.easeOut"},"+=.3")}function openNav(){var loadingSvg=Math.floor(5*Math.random())+1;$("nav svg use").attr("xlink:href","#"+loadingSvg);var tl=gsap.timeline();tl.set("nav",{display:"flex"}),tl.to("nav",1.3,{width:"100%",right:0,ease:"Expo.easeInOut"}),tl.from("nav .anim",{xPercent:100,opacity:0,stagger:.4,ease:"Power1.easeOut"}),tl.set("nav .anim-wrap",{css:{pointerEvents:"initial"}}),tl.from("nav aside",.7,{opacity:0,ease:"Power1.easeOut"}),gsap.to(".anim__fixed",{opacity:0,ease:"Power1.easeOut"})}function closeMenu(){var loadingSvg=Math.floor(5*Math.random())+1;$("nav svg use").attr("xlink:href","#"+loadingSvg);var tl=gsap.timeline();tl.to("nav",1,{width:"0",right:-230,ease:"Expo.easeInOut"}),tl.to("nav .anim, nav aside",1,{opacity:0},"-=.8"),tl.set("nav .anim, nav aside",{opacity:1}),tl.set("nav .anim-wrap",{css:{pointerEvents:"none"}}),gsap.to(".anim__fixed",{opacity:1,delay:1,ease:"Power1.easeOut"})}function initMenu(){$(".menu").click((function(e){e.preventDefault(),openNav()})),$(".close-menu ,.return").click((function(e){e.preventDefault(),closeMenu()})),$(".return__work").click((function(e){e.preventDefault(),closeMenu(),$("#landing").hasClass("active")?initProjects():$("#contact").hasClass("active")&&prevSection()})),$(".close-menu").mouseleave((function(){$(this).css("border-radius","50%")})),$(".close-menu").mouseenter((function(){menuHover()})),$("nav .anim-wrap").mouseenter((function(){var i=$(this).find("h1").attr("text");$("nav .img-wrapper."+i).addClass("active")})),$("nav .anim-wrap").mouseleave((function(){$("nav .img-wrapper").removeClass("active")})),$("#projects aside.minor .wrapper a").mouseleave((function(){$(this).css("border-radius","50%")})),$("#projects aside.minor .wrapper a").mouseover((function(){goHover()}))}function menuHover(){var n1=Math.floor(51*Math.random())+25,n2=Math.floor(51*Math.random())+25,n3=Math.floor(51*Math.random())+25,n4=Math.floor(51*Math.random())+25,n5,n6,n7,n8,borderRadius=`${n1}% ${100-n1}% ${100-n2}% ${n2}% / ${n3}% ${n4}% ${100-n4}% ${100-n3}%`;$(".close-menu").css("border-radius",borderRadius)}function goHover(){var n1=Math.floor(51*Math.random())+25,n2=Math.floor(51*Math.random())+25,n3=Math.floor(51*Math.random())+25,n4=Math.floor(51*Math.random())+25,n5,n6,n7,n8,borderRadius=`${n1}% ${100-n1}% ${100-n2}% ${n2}% / ${n3}% ${n4}% ${100-n4}% ${100-n3}%`;$("#projects aside.minor .wrapper.slick-current a").css("border-radius",borderRadius)}function initCursor(){var cursor=$(".cursor");$("a , .client, button, .cursor__hover").on("mouseenter",(function(){cursor.addClass("active")})),$("a , .client, button, .cursor__hover").on("mouseleave",(function(){cursor.removeClass("active")})),$("body.project #footer").on("mouseenter",(function(){cursor.addClass("active__next-project")})),$("body.project #footer").on("mouseleave",(function(){cursor.removeClass("active__next-project")})),setTimeout(()=>{$("#slider .draggable").on("mouseenter",(function(){cursor.addClass("active__slider")})),$("#slider .draggable").on("mouseleave",(function(){cursor.removeClass("active__slider")}))},1e3)}function delay(n){return n=n||2e3,new Promise(done=>{setTimeout(()=>{done()},n)})}function initScroller(){const body=document.body,scrollWrap=document.getElementById("main"),speed=$(window).width()<901?.7:.04;var offset=0;function smoothScroll(){if(!$("body").is(".stop-scroll")){var scroll="translateY(-"+(offset+=(window.pageYOffset-offset)*speed)+"px) translateZ(0)";if(scrollWrap.style.transform=scroll,callScroll=requestAnimationFrame(smoothScroll),$(".page-indicator").length){var width=offset/($(".viewport").innerHeight()-$("#footer").outerHeight());$(".page-indicator").css("width",100*width+"%")}}}setTimeout(()=>{$("body").height($(".viewport").innerHeight())},1e3),smoothScroll()}function screenTransitionLeave(){var loadingSvg=Math.floor(5*Math.random())+1;$(".screen svg use").attr("xlink:href","#"+loadingSvg);let screen=$(".screen");var tl=gsap.timeline({onStart:function(){screen.removeClass("enter")}});tl.set(screen,{clearProps:"all"}),tl.to(screen,1,{y:0})}function screenTransitionEnter(){var loadingSvg=Math.floor(5*Math.random())+1;$(".screen svg use").attr("xlink:href","#"+loadingSvg);let screen=$(".screen");var tl;gsap.timeline({onStart:function(){screen.addClass("enter")}}).to(screen,1,{yPercent:-100,rotate:180})}function blobTransition(){var tl=gsap.timeline();let initialSvg=$("#projects .minor .initial"),followSvg=$("#projects .minor .follow");var initialBlobSvg=Math.floor(3*Math.random())+10,followBlobSvg=Math.floor(3*Math.random())+20;initialSvg.find("use").attr("xlink:href","#"+initialBlobSvg),followSvg.find("use").attr("xlink:href","#"+followBlobSvg),tl.to(initialSvg,1,{width:7e3,height:7e3,ease:"Power1.easeInOut"}),tl.to(followSvg,1,{width:7e3,height:7e3,ease:"Power1.easeInOut"},"-=.5"),tl.to(".nav.menu",.3,{opacity:0})}function blobTransitionProject(){var tl=gsap.timeline();let initialSvg=$("body.project .initial"),followSvg=$("body.project .follow");var initialBlobSvg=Math.floor(3*Math.random())+10,followBlobSvg=Math.floor(3*Math.random())+20;initialSvg.find("use").attr("xlink:href","#"+initialBlobSvg),followSvg.find("use").attr("xlink:href","#"+followBlobSvg),tl.to(initialSvg,.7,{width:7e3,height:7e3,ease:"Power1.easeInOut"}),tl.to(followSvg,.7,{width:7e3,height:7e3,ease:"Power1.easeInOut"},"-=.3")}function projectLanding(){var tl=gsap.timeline({onStart:function(){$("#main").removeClass("loading"),setTimeout(()=>{$("#canvas").addClass("visible")},500)}});let banner=$("#banner"),header=banner.find("header"),img=banner.find(".minor img"),canvas=banner.find("aside");tl.from(img,.7,{width:0,ease:Expo.easeInOut}),tl.from(header,1,{opacity:0,y:20}),tl.from(canvas,1,{opacity:0},"-=.5")}function nextProjectLanding(){var tl=gsap.timeline({onStart:function(){$("#main").removeClass("loading"),setTimeout(()=>{$("#canvas").addClass("visible")},500)}});let banner=$("#banner"),header=banner.find("header"),img=banner.find(".minor img"),canvas=banner.find("aside");tl.set(banner,{opacity:1}),gsap.set(header,{opacity:1,y:0}),tl.from(canvas,1,{opacity:0})}function hpProjectLanding(){screenTransitionEnter(),$((function(){var tl=gsap.timeline({onComplete:function(){setTimeout(()=>{$("body").addClass("init__projects slide__first"),$(".active").removeClass("active"),$("#projects").addClass("active")},800)}});let scroller=$("#main"),pos=$("#projects").position().top;$(window).width()<901&&(pos=window.innerHeight),tl.set(scroller,{transform:"translateY(-"+pos+"px)"})}))}function nextProject(){$(".initNext").removeClass("initNext");var pos=$("#footer").position().top;$("body").addClass("stop-scroll");let scroller=$("#main"),minor=$("#footer .minor");gsap.to(scroller,1,{transform:"translateY(-"+pos+"px)"}),gsap.to("#footer .minor img:last-of-type",1,{opacity:1}),$("#footer").toggleClass("init bg__dark bg__light"),gsap.to(".page-indicator",{width:0}),gsap.to(minor,.7,{maxWidth:"20vw",ease:Expo.easeInOut})}function contactLanding(){var tl=gsap.timeline({onComplete:function(){$("video")[0].play()}});tl.from("#contact .anim",{yPercent:100,opacity:0,stagger:.3,ease:"Power1.easeOut"}),tl.from("#contact .container",{opacity:0,ease:"Power1.easeOut"}),tl.from("#contact .minor",.5,{opacity:0,ease:"Power1.easeOut"})}$(window).on("load",(function(){$("body").is(".index")&&preload(),sessionStorage.setItem("visited",!0)})),$((function(){$(".null").click((function(e){e.preventDefault()}))})),window.addEventListener("orientationchange",(function(){window.location.reload()}),!1),$((function(){var cursor=$(".cursor"),posX=0,posY=0,mouseX=0,mouseY=0;gsap.to({},.016,{repeat:-1,onRepeat:function(){posX+=(mouseX-posX)/2,posY+=(mouseY-posY)/2,gsap.set(cursor,{css:{left:mouseX-30,top:mouseY-30}})}}),$("body").on("mousemove",(function(e){mouseX=e.clientX,mouseY=e.clientY}))})),$((function(){barba.init({sync:!0,transitions:[{async leave(data){const done=this.async();let nexthref=data.next.url.href,currenthref=data.current.url.href,dataTrigger=data.trigger;nexthref.indexOf("projects")>=0?currenthref.indexOf("projects")>=0?"back"==dataTrigger||"forward"==dataTrigger||"popstate"==dataTrigger?(screenTransitionLeave(),await delay(1e3)):$(window).width()<901?(screenTransitionLeave(),await delay(1e3)):(nextProject(),await delay(1500)):currenthref.indexOf("contact")>=0||currenthref.indexOf("/studio")>=0?(screenTransitionLeave(),await delay(1e3)):(blobTransition(),await delay(1700)):(screenTransitionLeave(),await delay(1e3)),done()},async afterEnter(data){setTimeout(()=>{$(".screen__project").addClass("hidden")},50);let nexthref=data.next.url.href,currenthref=data.current.url.href,dataTrigger=data.trigger;nexthref.indexOf("#project")>=0?hpProjectLanding():nexthref.indexOf("projects")>=0?currenthref.indexOf("projects")>=0?"back"==dataTrigger||"forward"==dataTrigger||"popstate"==dataTrigger?(screenTransitionEnter(),setTimeout(()=>{projectLanding()},700)):($(window).width()<901&&screenTransitionEnter(),nextProjectLanding()):currenthref.indexOf("contact")>=0||currenthref.indexOf("/studio")>=0?(screenTransitionEnter(),setTimeout(()=>{projectLanding()},700)):projectLanding():(screenTransitionEnter(),$("body").is(".index")&&hpTransition()),$(".cursor").removeClass("active, active__slider, active__next-project")},async once(data){let nexthref;setTimeout(()=>{$(".screen__project").addClass("hidden")},50),data.next.url.href.indexOf("projects")>=0&&projectLanding()}}],views:[{namespace:"home",beforeEnter({next:next}){let script=document.createElement("script");script.src="/js/landing.min.js",next.container.appendChild(script)}},{namespace:"projects",beforeEnter({next:next}){let script=document.createElement("script");script.src="/js/projects.min.js",next.container.appendChild(script),$((function(){initScroller()}))}},{namespace:"studio",beforeEnter({next:next}){let script=document.createElement("script");script.src="/js/studio.min.js",next.container.appendChild(script),$((function(){initScroller()}))}},{namespace:"contact",beforeEnter({next:next}){let script=document.createElement("script");script.src="/js/contact.min.js",next.container.appendChild(script),contactLanding(),$((function(){initScroller()}))}}]}),barba.hooks.afterLeave(data=>{var nextHtml=data.next.html,response=nextHtml.replace(/(<\/?)body( .+?)?>/gi,"$1notbody$2>",nextHtml),bodyClasses=$(response).filter("notbody").attr("class");$("body").attr("class",bodyClasses),sessionStorage.getItem("visited")&&$("body").addClass("loaded")}),barba.hooks.beforeOnce(data=>{gsap.registerPlugin(ScrollTrigger),window.scrollTo(0,0),initCursor(),initMenu()}),barba.hooks.enter(data=>{window.scrollTo(0,0),initCursor(),initMenu()})}));